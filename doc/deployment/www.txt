---
* Web Server Dependencies
---

tomcat
java
jakarta-jstl
jdbc-postgresql / libpg-java
log4j


---
* Web Server Deployment Process
---

1. Install tomcat

2. Set listen address/port attributes

    File:       $CATALINA_HOME/conf/server.xml
    Element:    Connector
    Attributes: address, port

3. Disable AJP Connector
    
    File:       $CATALINA_HOME/conf/server.xml
    Attribute:  Connector

4. Add a jdbc library reference from tomcat's lib directory

5. Configure access logging
    
    File:       $CATALINA_HOME/conf/server.xml
    Element:    Valve

    Attribute:  className
    Value:      org.apache.catalina.valves.JDBCAccessLogValve

    Attribute:  driverName
    Value:      org.postgresql.Driver

    Attribute:  connectionURL
    Value:      jdbc:postgresql://localhost/logstore

    Attribute:  tableName
    Value:      tbaccesslog

    Attribute:  pattern
    Value:      combined

6. Configure application logging

    File:       $WORKING_DIR/etc/log4j.properties

7. Grant application permissions

    File:       $CATALINA_HOME/conf/policy.d/50user.policy
    Codebase:   file:/${catalina.base}/webapps/-

    Permission: SocketPermission (localhost:postgres, connect)
    Permission: SocketPermission (*, resolve)

8. Create a src/lib subdirectory under the working directory root

9. Create links to shared log4j, jdbc and jakarta taglib jar files from src/lib

10. Configure the application to point to an existing database

    File:       $WORKING_DIR/etc/autochef.properties

11. Build (ant), and deploy the .war file to the root application location

    File: $CATALINA_HOME/webapps/ROOT.war

12. Start tomcat service
